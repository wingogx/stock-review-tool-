# 同花顺（10jqka.com.cn）数据补充说明

## 📊 数据源分析

你提到的 **https://q.10jqka.com.cn/** 是同花顺的问财行情中心页面，提供丰富的市场数据。

好消息是：**AKShare 已经集成了同花顺的主要数据接口！**

---

## ✅ 已集成的同花顺数据

AKShare 提供了 **34+ 个同花顺相关接口**，可以直接使用：

### 1️⃣ 概念板块数据

```python
import akshare as ak

# 同花顺概念板块列表
df = ak.stock_board_concept_name_ths()
# 返回: 374 个概念板块
# 列: name(概念名称), code(概念代码)

# 示例输出:
#      name      code
# 0  阿尔茨海默概念  308614
# 1    AI PC     309121
# 2   AI手机     309120
```

**对比东方财富的概念数据:**
- 同花顺: 374个概念（更全面）
- 东方财富: ~300个概念

可以**结合使用**，互为补充！

### 2️⃣ 行业板块数据

```python
# 同花顺行业板块列表
df = ak.stock_board_industry_name_ths()
# 返回: 90 个行业板块
```

### 3️⃣ 市场活跃度

```python
# 市场活跃度（乐咕乐股提供）
df = ak.stock_market_activity_legu()

# 返回数据示例:
#  item      value
#  上涨      2845
#  下跌      1823
#  停牌        17
#  活跃度    79.86%
#  统计日期  2025-12-05
```

**这个数据非常有用！可以作为市场情绪的补充指标。**

---

## 🎯 如何整合同花顺数据到你的复盘工具

### 方案一：概念板块双数据源对比

```python
# 获取东方财富概念
concepts_em = ak.stock_board_concept_name_em()

# 获取同花顺概念
concepts_ths = ak.stock_board_concept_name_ths()

# 对比分析
print(f"东方财富概念数: {len(concepts_em)}")
print(f"同花顺概念数: {len(concepts_ths)}")

# 可以取交集或并集
# 或者只使用数据更全的同花顺
```

### 方案二：市场活跃度作为情绪指标

将市场活跃度加入到 `market_sentiment` 表中：

```sql
-- 在 market_sentiment 表中新增字段
ALTER TABLE market_sentiment
ADD COLUMN market_activity DECIMAL(10, 4),  -- 市场活跃度
ADD COLUMN suspended_count INT;             -- 停牌数量
```

数据采集代码：

```python
def get_market_activity():
    """获取市场活跃度"""
    df = ak.stock_market_activity_legu()

    # 解析数据
    data_dict = dict(zip(df['item'], df['value']))

    return {
        "market_activity": float(data_dict.get('活跃度', '0%').replace('%', '')),
        "suspended_count": int(data_dict.get('停牌', 0))
    }
```

### 方案三：同花顺概念作为主数据源

如果同花顺的概念板块更全面，可以直接使用：

```python
def get_hot_concepts_ths():
    """获取同花顺概念板块（更全面）"""

    # 1. 获取概念列表
    concepts = ak.stock_board_concept_name_ths()

    # 2. 获取每个概念的详细信息
    for _, concept in concepts.iterrows():
        concept_code = concept['code']

        # 获取概念详情（涨跌幅、成分股等）
        detail = ak.stock_board_concept_info_ths(symbol=concept_code)

        # ... 保存到数据库
```

---

## 📋 同花顺相关的完整 API 列表

AKShare 提供的同花顺接口（部分）：

| API 函数 | 说明 | 用途 |
|---------|------|------|
| `stock_board_concept_name_ths()` | 概念板块列表 | ✅ 推荐使用 |
| `stock_board_concept_info_ths()` | 概念详细信息 | ✅ 推荐使用 |
| `stock_board_concept_summary_ths()` | 概念汇总数据 | ✅ 推荐使用 |
| `stock_board_industry_name_ths()` | 行业板块列表 | 可用 |
| `stock_board_industry_info_ths()` | 行业详细信息 | 可用 |
| `stock_financial_abstract_ths()` | 财务摘要 | 可用 |
| `stock_profit_forecast_ths()` | 业绩预测 | 可用 |
| `fund_etf_spot_ths()` | ETF实时行情 | 可用 |

更多接口查看：https://akshare.akfamily.xyz/

---

## 🔄 数据对比：同花顺 vs 东方财富

| 数据类型 | 同花顺(THS) | 东方财富(EM) | 推荐 |
|---------|------------|-------------|------|
| 概念板块数量 | 374个 | ~300个 | 同花顺更全 |
| 涨停池数据 | ❌ 无直接接口 | ✅ 有 | 东方财富 |
| 龙虎榜数据 | ❌ 无直接接口 | ✅ 有 | 东方财富 |
| 市场活跃度 | ✅ 有独家 | ❌ 无 | 同花顺独有 |
| 实时行情 | ✅ 有 | ✅ 有 | 都可以 |
| 概念详情 | ✅ 有 | ✅ 有 | 都可以 |

**建议策略:**
- **涨停、龙虎榜** → 使用东方财富（数据更完整）
- **概念板块** → 使用同花顺（更全面）
- **市场活跃度** → 使用同花顺（独家）
- **实时行情** → 两者都可以

---

## 💡 推荐实施方案

### 核心数据使用东方财富

```python
# 涨停池
zt_pool = ak.stock_zt_pool_em()

# 龙虎榜
lhb = ak.stock_lhb_detail_em()

# 实时行情
stocks = ak.stock_zh_a_spot_em()
```

### 补充数据使用同花顺

```python
# 概念板块（更全面）
concepts_ths = ak.stock_board_concept_name_ths()

# 市场活跃度（独家）
activity = ak.stock_market_activity_legu()
```

### 数据库表增强

在 `market_sentiment` 表中增加同花顺数据：

```sql
ALTER TABLE market_sentiment
ADD COLUMN market_activity DECIMAL(10, 4) COMMENT '市场活跃度(%)',
ADD COLUMN suspended_count INT COMMENT '停牌数量',
ADD COLUMN data_source VARCHAR(20) DEFAULT 'eastmoney' COMMENT '数据来源';
```

---

## 📝 更新后的数据采集脚本

```python
def get_market_sentiment_enhanced(self):
    """增强版市场情绪（整合同花顺数据）"""

    # 1. 基础数据（东方财富）
    sentiment = self.get_market_sentiment()  # 原有方法

    # 2. 补充同花顺市场活跃度
    try:
        activity_df = ak.stock_market_activity_legu()
        activity_dict = dict(zip(activity_df['item'], activity_df['value']))

        sentiment.update({
            "market_activity": float(str(activity_dict.get('活跃度', '0%')).replace('%', '')),
            "suspended_count": int(activity_dict.get('停牌', 0))
        })
    except Exception as e:
        logger.warning(f"获取市场活跃度失败: {e}")

    return sentiment
```

---

## ✅ 总结

### 关于同花顺数据的核心要点：

1. **✅ 不需要爬虫** - AKShare 已集成同花顺数据
2. **✅ 概念更全面** - 374个概念 vs 东方财富的300个
3. **✅ 独家市场活跃度** - 可作为情绪指标
4. **✅ 完全免费** - 所有数据都可直接获取

### 推荐使用策略：

| 数据需求 | 推荐数据源 | 原因 |
|---------|-----------|------|
| 涨停板、龙虎榜 | 东方财富 | 数据完整、字段丰富 |
| 概念板块 | 同花顺 | 概念更全面（374个） |
| 市场活跃度 | 同花顺 | 独家数据 |
| 实时行情 | 东方财富 | 更新快、字段全 |

**你无需访问同花顺网站或爬虫，所有数据都可以通过 AKShare API 直接获取！**

---

## 🎯 下一步行动

建议你在数据采集脚本中：

1. ✅ 保留东方财富作为主数据源（涨停、龙虎榜）
2. ✅ 补充同花顺的概念板块数据（更全面）
3. ✅ 加入市场活跃度指标（独家，有价值）
4. ✅ 可选：双数据源对比验证

**这样你就能获得最全面、最准确的短线复盘数据！**
