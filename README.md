# 股票短线复盘工具

一个用于 A 股市场的每日短线交易复盘系统，提供市场情绪分析、涨停池追踪、龙虎榜分析、热门概念板块和自选股监控功能。

**当前版本**: v1.2.0 | **更新日期**: 2025-12-09

## 📢 最新更新

### v1.2.0 (2025-12-09) - 炸板率计算逻辑优化

**重要变更**：
- ✅ 采用行业通用口径计算炸板率/封板率
- ✅ 新增炸板股池数据源（`stock_zt_pool_zbgc_em`）
- ✅ 数据与主流平台对齐（误差 < 0.1%）

**数据对比**：
- 原炸板率：47.17% → **新炸板率：30.26%**（与东强吧30.3%一致）
- 原封板率：52.83% → **新封板率：69.74%**（与东强吧69.7%一致）

**查看详情**：
- [CHANGELOG.md](CHANGELOG.md) - 完整更新日志
- [炸板率计算逻辑优化方案](docs/技术方案/炸板率计算逻辑优化方案.md) - 详细技术文档

---

## 📚 快速导航

### 开发前必读
1. [产品需求文档 (PRD)](docs/需求分析/PRD.md) - 完整的产品功能和需求说明
2. [技术方案](docs/技术方案/技术方案.md) - 详细的技术实现方案和代码示例
3. [开发计划](docs/技术方案/开发计划.md) - 分阶段的开发任务清单

### 开发参考
- [快速开始指南](docs/开发指南/QUICKSTART.md) - 环境配置和快速上手
- [数据库设计](database/schema.sql) - 完整的数据库结构（11张表）
- [数据采集脚本](scripts/data-collector-tushare-hybrid.py) - 生产环境数据采集器

### 数据源说明
- [数据源对比分析](docs/数据源分析/数据源对比分析.md) - Tushare vs AKShare vs 商业服务对比
- [Tushare 6000积分说明](docs/数据源分析/Tushare6000积分更新说明.md) - Token 权限和使用建议
- [同花顺数据补充](docs/数据源分析/同花顺数据补充说明.md) - 同花顺数据集成说明

## 🎯 核心特性

### 1. 市场情绪分析
- 涨跌比统计
- 连板分布图（1板、2板、3板+）
- 炸板率分析
- 市场活跃度指标

### 2. 涨停池详细列表
- 涨停股票清单（含首次封板时间、连板数）
- 跌停股票清单
- 炸板股票追踪（开板次数、封板强度）

### 3. 龙虎榜分析
- 上榜股票列表（上榜原因、成交金额）
- 机构席位分析（买入/卖出金额、净买额）
- 游资席位排名（TOP 10 营业部）

### 4. 热门概念板块
- 374个同花顺概念板块
- 板块涨跌幅排名
- 龙头股识别
- 成分股列表

### 5. 自选股监控
- 自定义股票池
- 异动提醒（涨停、跌停、龙虎榜、概念异动）
- 持仓跟踪

## 🛠️ 技术栈

### 前端
- **框架**: Next.js 15 (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS + Shadcn/ui
- **图表**: Recharts
- **状态管理**: Zustand
- **实时**: Supabase Realtime

### 后端
- **框架**: FastAPI (Python 3.11+)
- **数据源**:
  - Tushare Pro（6000+积分）- 龙虎榜、个股行情
  - AKShare（免费）- 涨停池、概念板块、市场活跃度
- **任务调度**: APScheduler（每日16:00）
- **数据验证**: Pydantic
- **重试机制**: Tenacity

### 数据库
- **服务**: Supabase (PostgreSQL 15.x)
- **表数量**: 11张核心表
- **安全**: Row Level Security (RLS)

### 部署
- **前端**: Vercel
- **后端**: Railway
- **数据库**: Supabase Cloud

## 💰 成本分析

| 项目 | 年费用 |
|-----|-------|
| Tushare Pro | 500元 |
| Supabase (Pro) | $300 ≈ 2,100元 |
| Vercel (Pro) | $240 ≈ 1,680元 |
| Railway | $60 ≈ 420元 |
| **总计** | **约 4,700元/年** |

**vs 商业服务**: Wind/同花顺需 10万+/年，节省 **95,300元/年**

## 📁 目录结构

```
短信复盘/
├── docs/                          # 📚 文档目录
│   ├── 需求分析/                   # 需求相关文档
│   ├── 技术方案/                   # 技术方案和开发计划
│   ├── 数据源分析/                 # 数据源对比和说明
│   └── 开发指南/                   # 快速开始和项目说明
├── database/                      # 🗄️ 数据库相关
│   └── schema.sql                 # 数据库结构（11张表）
├── scripts/                       # 📜 生产脚本
│   ├── data-collector-tushare-hybrid.py  # 混合数据采集器
│   └── test-tushare-token.py      # Token 测试脚本
├── archive/                       # 📦 归档文件（过程文档）
├── .env                           # 环境变量（已配置 Token）
├── .env.example                   # 环境变量示例
└── requirements.txt               # Python 依赖
```

详见 [项目文件整理说明](项目文件整理说明.md)

## 🚀 快速开始

### 1. 环境配置

```bash
# 安装依赖
pip3 install -r requirements.txt

# 配置环境变量（复制 .env.example 为 .env）
cp .env.example .env

# 编辑 .env 填入你的配置
# TUSHARE_TOKEN=你的Token
# SUPABASE_URL=你的Supabase URL
# SUPABASE_KEY=你的Service Role Key
```

### 2. 测试数据采集

```bash
# 测试 Tushare Token
python3 scripts/test-tushare-token.py

# 运行数据采集器（需要交易日）
python3 scripts/data-collector-tushare-hybrid.py
```

### 3. 初始化数据库

在 Supabase 控制台执行 `database/schema.sql`

## 📅 开发计划

项目分为 5 个阶段，共 34 个任务，预计 4-5 周完成：

- **Phase 1**: 环境搭建（3-4天）
- **Phase 2**: 数据采集层（3-4天）
- **Phase 3**: 后端 API（4-5天）
- **Phase 4**: 前端开发（5-6天）
- **Phase 5**: 测试部署（3-4天）

详见 [开发计划](docs/技术方案/开发计划.md)

## 📊 数据源策略

### Tushare Pro（6000+积分）
- ✅ 龙虎榜数据（机构席位自动分类）
- ✅ 个股行情（日线、每日指标）
- ✅ 市场统计（交易统计）

### AKShare（免费）
- ✅ 涨停池（字段详细：封板时间、连板数、开板次数）
- ✅ 概念板块（374个热门题材：AI、ChatGPT、新能源等）
- ✅ 市场活跃度（同花顺独家指标）
- ✅ 炸板数据（Tushare 无此 API）

**为什么概念板块用 AKShare？**
- Tushare 概念：地域/行业（安徽、北京、银行）
- AKShare 概念：热门题材（AI、ChatGPT、新能源）✅ 更适合短线复盘

详见 [数据源对比分析](docs/数据源分析/数据源对比分析.md)

## 🔑 核心优势

1. **成本低**: 年成本约 4,700元，vs 商业服务节省 95,300元
2. **数据全**: 混合 Tushare + AKShare，覆盖所有短线复盘需求
3. **实时性**: Supabase Realtime 订阅，数据自动更新
4. **可扩展**: 模块化设计，易于添加新功能
5. **自主可控**: 完整源码，可定制化开发

## 📝 下一步

1. ✅ 需求分析完成
2. ✅ 技术方案确定
3. ✅ 开发计划制定
4. ✅ 目录结构整理
5. ⏭️ **待开始**: Phase 1 - 环境搭建

参考 [开发计划](docs/技术方案/开发计划.md) 开始开发

## 📞 联系方式

项目开发中遇到问题可参考：
- [快速开始指南](docs/开发指南/QUICKSTART.md)
- [技术方案](docs/技术方案/技术方案.md)
- [数据源说明](docs/数据源分析/)

---

**最后更新**: 2025-12-07
**项目状态**: 规划完成，待开发
**Tushare Token**: 已配置（6000+积分）
